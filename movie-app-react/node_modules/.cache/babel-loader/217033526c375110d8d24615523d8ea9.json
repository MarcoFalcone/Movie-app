{"ast":null,"code":"import _regeneratorRuntime from\"/home/markrius/Desktop/React-movie-app/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/home/markrius/Desktop/React-movie-app/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/markrius/Desktop/React-movie-app/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/markrius/Desktop/React-movie-app/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{Context}from'..';import Movielist from'../components/Movielist';import'../styles/App.css';import{jsx as _jsx}from\"react/jsx-runtime\";var Homepage=function Homepage(){var _useContext=useContext(Context),apiKey=_useContext.apiKey;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isFetching=_useState2[0],setIsFetching=_useState2[1];var _useState3=useState({popular:[],favorites:[],genres:{action:[],comedy:[],horror:[],romance:[],scifi:[],thriller:[]}}),_useState4=_slicedToArray(_useState3,2),movies=_useState4[0],setMovies=_useState4[1];var getMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var urlAction,urlComedy,urlHorror,urlRomance,urlScifi,urlThriller,response_Action,responseJson_Action,response_Comedy,responseJson_Comedy,response_Horror,responseJson_Horror,response_Romance,responseJson_Romance,response_Scifi,responseJson_Scifi,response_Thriller,responseJson_Thriller,urlMostPopular,response_MostPopular,responseJson_MostPopular,response_Favorites,favoriteJson;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:urlAction=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&with_genres=28&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1\");urlComedy=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&with_genres=35&ssort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1\");urlHorror=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&with_genres=27&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1\");urlRomance=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&with_genres=10749&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1\");urlScifi=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&with_genres=878&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1\");urlThriller=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&with_genres=53&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1\");_context.next=8;return fetch(urlAction);case 8:response_Action=_context.sent;_context.next=11;return response_Action.json();case 11:responseJson_Action=_context.sent;_context.next=14;return fetch(urlComedy);case 14:response_Comedy=_context.sent;_context.next=17;return response_Comedy.json();case 17:responseJson_Comedy=_context.sent;_context.next=20;return fetch(urlHorror);case 20:response_Horror=_context.sent;_context.next=23;return response_Horror.json();case 23:responseJson_Horror=_context.sent;_context.next=26;return fetch(urlRomance);case 26:response_Romance=_context.sent;_context.next=29;return response_Romance.json();case 29:responseJson_Romance=_context.sent;_context.next=32;return fetch(urlScifi);case 32:response_Scifi=_context.sent;_context.next=35;return response_Scifi.json();case 35:responseJson_Scifi=_context.sent;_context.next=38;return fetch(urlThriller);case 38:response_Thriller=_context.sent;_context.next=41;return response_Thriller.json();case 41:responseJson_Thriller=_context.sent;urlMostPopular=\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(apiKey,\"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1\");_context.next=45;return fetch(urlMostPopular);case 45:response_MostPopular=_context.sent;_context.next=48;return response_MostPopular.json();case 48:responseJson_MostPopular=_context.sent;_context.next=51;return fetch('/api/movies/favorites');case 51:response_Favorites=_context.sent;_context.next=54;return response_Favorites.json();case 54:favoriteJson=_context.sent;if(responseJson_Action&&responseJson_Comedy&&responseJson_Horror&&responseJson_Romance&&responseJson_Scifi&&responseJson_Thriller&&favoriteJson&&responseJson_MostPopular!==null&&responseJson_MostPopular!==void 0&&responseJson_MostPopular.results){setMovies(_objectSpread(_objectSpread({},movies),{},{popular:responseJson_MostPopular===null||responseJson_MostPopular===void 0?void 0:responseJson_MostPopular.results,favorites:favoriteJson,genres:{action:responseJson_Action===null||responseJson_Action===void 0?void 0:responseJson_Action.results,comedy:responseJson_Comedy===null||responseJson_Comedy===void 0?void 0:responseJson_Comedy.results,horror:responseJson_Horror===null||responseJson_Horror===void 0?void 0:responseJson_Horror.results,romance:responseJson_Romance===null||responseJson_Romance===void 0?void 0:responseJson_Romance.results,scifi:responseJson_Scifi===null||responseJson_Scifi===void 0?void 0:responseJson_Scifi.results,thriller:responseJson_Thriller===null||responseJson_Thriller===void 0?void 0:responseJson_Thriller.results}}));}setIsFetching(false);case 57:case\"end\":return _context.stop();}}},_callee);}));return function getMovies(){return _ref.apply(this,arguments);};}();var popular=movies.popular,genres=movies.genres,favorites=movies.favorites;var action=genres.action,comedy=genres.comedy,horror=genres.horror,romance=genres.romance,scifi=genres.scifi,thriller=genres.thriller;var genresList=[{title:'Trending now',items:popular,id:'popular'},{title:'Action',items:action,id:'action'},{title:'Comedy',items:comedy,id:'comedy'},{title:'Horror',items:horror,id:'horroe'},{title:'Romance',items:romance,id:'romance'},{title:'Sci-fi',items:scifi,id:'scifi'},{title:'Thriller',items:thriller,id:'thriller'},{title:'My list',items:favorites,id:'myList'}];useEffect(function(){getMovies();},[]);return genresList.map(function(genre){return/*#__PURE__*/_jsx(Movielist,{isFetching:isFetching,title:genre.title,movies:genre.items,id:genre.id,favorites:favorites},genre.id);});};export default Homepage;","map":{"version":3,"names":["React","useContext","useEffect","useState","Context","Movielist","Homepage","apiKey","isFetching","setIsFetching","popular","favorites","genres","action","comedy","horror","romance","scifi","thriller","movies","setMovies","getMovies","urlAction","urlComedy","urlHorror","urlRomance","urlScifi","urlThriller","fetch","response_Action","json","responseJson_Action","response_Comedy","responseJson_Comedy","response_Horror","responseJson_Horror","response_Romance","responseJson_Romance","response_Scifi","responseJson_Scifi","response_Thriller","responseJson_Thriller","urlMostPopular","response_MostPopular","responseJson_MostPopular","response_Favorites","favoriteJson","results","genresList","title","items","id","map","genre"],"sources":["/home/markrius/Desktop/React-movie-app/front/src/views/Homepage.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Context } from '..';\nimport Movielist from '../components/Movielist';\n\nimport '../styles/App.css';\n\nconst Homepage = () => {\n  const { apiKey } = useContext(Context);\n  const [isFetching, setIsFetching] = useState(true);\n\n  const [movies, setMovies] = useState({\n    popular: [],\n    favorites: [],\n    genres: {\n      action : [],\n      comedy : [],\n      horror : [],\n      romance : [],\n      scifi : [],\n      thriller : [],\n    }\n  });\n\n  const getMovies = async () => {\n\n    const urlAction = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=28&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1`;\n    const urlComedy = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=35&ssort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1`;\n    const urlHorror = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=27&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1`;\n    const urlRomance = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=10749&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1`;\n    const urlScifi = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=878&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1`;\n    const urlThriller = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=53&sort_by=popularity.desc&language=en-US&include_adult=false&include_video=true&page=1`;\n\n    const response_Action = await fetch(urlAction);\n    const responseJson_Action = await response_Action.json();\n\n    const response_Comedy = await fetch(urlComedy);\n    const responseJson_Comedy = await response_Comedy.json();\n\n    const response_Horror = await fetch(urlHorror);\n    const responseJson_Horror = await response_Horror.json();\n\n    const response_Romance = await fetch(urlRomance);\n    const responseJson_Romance = await response_Romance.json();\n\n    const response_Scifi = await fetch(urlScifi);\n    const responseJson_Scifi = await response_Scifi.json();\n\n    const response_Thriller = await fetch(urlThriller);\n    const responseJson_Thriller = await response_Thriller.json();\n\n    const urlMostPopular = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1`;\n    const response_MostPopular = await fetch(urlMostPopular);\n    const responseJson_MostPopular = await response_MostPopular.json();\n\n    const response_Favorites = await fetch('/api/movies/favorites');\n    const favoriteJson = await response_Favorites.json();\n\n    if (responseJson_Action\n      && responseJson_Comedy\n      && responseJson_Horror\n      && responseJson_Romance\n      && responseJson_Scifi\n      && responseJson_Thriller\n      && favoriteJson\n      && responseJson_MostPopular?.results) {\n      setMovies({\n        ...movies,\n        popular: responseJson_MostPopular?.results,\n        favorites: favoriteJson,\n        genres: {\n          action : responseJson_Action?.results,\n          comedy : responseJson_Comedy?.results,\n          horror : responseJson_Horror?.results,\n          romance : responseJson_Romance?.results,\n          scifi : responseJson_Scifi?.results,\n          thriller : responseJson_Thriller?.results,\n        }\n      });\n    }\n\n    setIsFetching(false);\n  };\n\n  const {\n    popular,\n    genres,\n    favorites,\n  } = movies;\n\n  const {\n    action,\n    comedy,\n    horror,\n    romance,\n    scifi,\n    thriller,\n  } = genres;\n\n  const genresList = [\n    {\n      title: 'Trending now',\n      items: popular,\n      id: 'popular'\n    },\n    {\n      title: 'Action',\n      items: action,\n      id: 'action'\n    },\n    {\n      title: 'Comedy',\n      items: comedy,\n      id: 'comedy'\n    },\n    {\n      title: 'Horror',\n      items: horror,\n      id: 'horroe'\n    },\n    {\n      title: 'Romance',\n      items: romance,\n      id: 'romance'\n    },\n    {\n      title: 'Sci-fi',\n      items: scifi,\n      id: 'scifi'\n    },\n    {\n      title: 'Thriller',\n      items: thriller,\n      id: 'thriller'\n    },\n    {\n      title: 'My list',\n      items: favorites,\n      id: 'myList'\n    }\n  ];\n\n  useEffect(() => {\n    getMovies();\n  }, []);\n\n  return genresList.map((genre) => (\n    <Movielist\n      key={genre.id}\n      isFetching={isFetching}\n      title={genre.title}\n      movies={genre.items}\n      id={genre.id}\n      favorites={favorites}\n    />\n  ));\n};\n\nexport default Homepage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}