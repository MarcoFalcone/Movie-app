{"ast":null,"code":"var _jsxFileName = \"/home/markrius/Desktop/React-movie-app/front/src/views/DetailMovie.jsx\",\n    _s2 = $RefreshSig$();\n\n/* eslint-disable react/no-unknown-property */\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useDetectClickOutside } from 'react-detect-click-outside';\nimport { useHistory } from 'react-router-dom';\nimport { Context } from '..';\nimport '../styles/Detail.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst DetailMovie = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const {\n    apiKey\n  } = useContext(Context);\n  const history = useHistory();\n  const {\n    poster,\n    overview,\n    vote,\n    date,\n    title,\n    id\n  } = history.location.state;\n  const [trailer, setTrailer] = useState('');\n  const [watchTrailer, setWatchTrailer] = useState(false);\n  const [favorites, setFavorites] = useState([]);\n\n  const addFavorite = async () => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        poster_path: poster,\n        overview,\n        vote_average: vote,\n        release_date: date,\n        title,\n        id\n      })\n    };\n    await fetch('/api/movies/favorites', requestOptions);\n  };\n\n  console.log(id);\n\n  const removeFavorite = async id => {\n    const requestOptions = {\n      method: 'DELETE'\n    };\n    await fetch(`/api/movies/favorites/${id}`, requestOptions);\n  };\n\n  const getFavorites = async () => {\n    const res = await fetch('/api/movies/favorites');\n    const resJson = await res.json();\n    setFavorites(resJson);\n  };\n\n  const getTrailer = async () => {\n    const urlVideos = `https://api.themoviedb.org/3/movie/${id}/videos?api_key=${apiKey}&language=en-US`;\n    const response = await fetch(urlVideos);\n    const responseJson = await response.json();\n\n    if (responseJson !== null && responseJson !== void 0 && responseJson.results) {\n      var _responseJson$results;\n\n      const objTrailer = responseJson === null || responseJson === void 0 ? void 0 : (_responseJson$results = responseJson.results) === null || _responseJson$results === void 0 ? void 0 : _responseJson$results.find(obj => obj.type === 'Trailer');\n      if (objTrailer) setTrailer(objTrailer === null || objTrailer === void 0 ? void 0 : objTrailer.key);\n    }\n  };\n\n  const isMovieInFavorites = favorites.some(movie => (movie === null || movie === void 0 ? void 0 : movie.id) === id);\n\n  const ModalTrailer = () => {\n    _s();\n\n    const ref = useDetectClickOutside({\n      onTriggered: () => setWatchTrailer(false)\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trailerWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => setWatchTrailer(false),\n        className: \"closeTrailer\",\n        children: \"CLOSE \\u2716\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n        ref: ref,\n        title: \"trailer\",\n        className: \"trailerFrame\",\n        src: `https://www.youtube.com/embed/${trailer}`,\n        type: \"video/mp4\",\n        controls: true,\n        allowFullScreen: \"allowfullscreen\",\n        mozallowfullscreen: \"mozallowfullscreen\",\n        msallowfullscreen: \"msallowfullscreen\",\n        oallowfullscreen: \"oallowfullscreen\",\n        webkitallowfullscreen: \"webkitallowfullscreen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  };\n\n  _s(ModalTrailer, \"9iSBT6ucWcUF5I5sPbxrAth73Dk=\", false, function () {\n    return [useDetectClickOutside];\n  });\n\n  useEffect(() => {\n    getTrailer();\n    getFavorites();\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detailWrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"detailPoster\",\n          src: poster,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '30px',\n              marginBottom: '100px'\n            },\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '30px'\n            },\n            children: date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: overview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '30px'\n            },\n            children: [vote, \"\\u2605\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), trailer ? /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: () => setWatchTrailer(true),\n            className: \"detailAction\",\n            children: \"Watch Trailer \\u25BA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 24\n          }, this) : null, isMovieInFavorites ? /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: () => removeFavorite(),\n            className: \"detailAction\",\n            children: \"Remove from favorites +\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: () => addFavorite(),\n            className: \"detailAction\",\n            children: \"Add to favorites +\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), watchTrailer ? /*#__PURE__*/_jsxDEV(ModalTrailer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true);\n};\n\n_s2(DetailMovie, \"dhug3aJiFsEzVYtsNZWtwqBdMOE=\", false, function () {\n  return [useHistory];\n});\n\n_c = DetailMovie;\nexport default DetailMovie;\n\nvar _c;\n\n$RefreshReg$(_c, \"DetailMovie\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useDetectClickOutside","useHistory","Context","DetailMovie","apiKey","history","poster","overview","vote","date","title","id","location","state","trailer","setTrailer","watchTrailer","setWatchTrailer","favorites","setFavorites","addFavorite","requestOptions","method","headers","body","JSON","stringify","poster_path","vote_average","release_date","fetch","console","log","removeFavorite","getFavorites","res","resJson","json","getTrailer","urlVideos","response","responseJson","results","objTrailer","find","obj","type","key","isMovieInFavorites","some","movie","ModalTrailer","ref","onTriggered","fontSize","marginBottom"],"sources":["/home/markrius/Desktop/React-movie-app/front/src/views/DetailMovie.jsx"],"sourcesContent":["/* eslint-disable react/no-unknown-property */\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useDetectClickOutside } from 'react-detect-click-outside';\nimport { useHistory } from 'react-router-dom';\nimport { Context } from '..';\n\nimport '../styles/Detail.css';\n\nconst DetailMovie = () => {\n  const { apiKey } = useContext(Context);\n  const history = useHistory();\n  \n  const {\n    poster, overview, vote, date, title, id\n  } = history.location.state;\n  \n  const [trailer, setTrailer] = useState('');\n  const [watchTrailer, setWatchTrailer] = useState(false);\n  const [favorites, setFavorites] = useState([]);\n\n  const addFavorite = async () => {\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        poster_path: poster,\n        overview,\n        vote_average: vote,\n        release_date: date,\n        title,\n        id\n      })\n    };\n    await fetch('/api/movies/favorites', requestOptions);\n  };\n\n  console.log(id);\n\n  const removeFavorite = async (id) => {\n    const requestOptions = {\n      method: 'DELETE',\n    };\n    await fetch(`/api/movies/favorites/${id}`, requestOptions);\n  };\n\n  const getFavorites = async () => {\n    const res = await fetch('/api/movies/favorites');\n    const resJson = await res.json();\n    setFavorites(resJson);\n  };\n  \n  const getTrailer = async () => {\n    const urlVideos = `https://api.themoviedb.org/3/movie/${id}/videos?api_key=${apiKey}&language=en-US`;\n    const response = await fetch(urlVideos);\n    const responseJson = await response.json();\n    if (responseJson?.results) {\n      const objTrailer = responseJson?.results?.find((obj) => obj.type === 'Trailer');\n      if (objTrailer) setTrailer(objTrailer?.key);\n    }\n  };\n\n  const isMovieInFavorites = favorites.some((movie) => movie?.id === id);\n\n  \n  const ModalTrailer = () => {\n    const ref = useDetectClickOutside({ onTriggered: () => setWatchTrailer(false) });\n\n    return (\n      <div className=\"trailerWrapper\">\n        <p onClick={() => setWatchTrailer(false)} className=\"closeTrailer\">CLOSE &#10006;</p>\n        <iframe\n          ref={ref}\n          title=\"trailer\"\n          className=\"trailerFrame\"\n          src={`https://www.youtube.com/embed/${trailer}`}\n          type=\"video/mp4\"\n          controls\n          allowFullScreen=\"allowfullscreen\"\n          mozallowfullscreen=\"mozallowfullscreen\"\n          msallowfullscreen=\"msallowfullscreen\"\n          oallowfullscreen=\"oallowfullscreen\"\n          webkitallowfullscreen=\"webkitallowfullscreen\" />\n      </div>\n    );\n  };\n\n  useEffect(() => {\n    getTrailer();\n    getFavorites();\n  }, [id]);\n\n  return (\n    <>\n      <div className='detailWrapper'>\n        <div className=\"info\">\n          <img className=\"detailPoster\" src={poster} alt='' />\n          <div>\n            <p style={{ fontSize: '30px', marginBottom: '100px' }}>{title}</p>\n            <p style={{ fontSize: '30px' }}>{date}</p>\n            <p>{overview}</p>\n            <span style={{ fontSize: '30px' }}>{vote}&#x2605;</span>\n            {trailer ? <p onClick={() => setWatchTrailer(true)} className='detailAction'>Watch Trailer &#9658;</p> : null}\n            {isMovieInFavorites ? (\n              <p onClick={() => removeFavorite()} className='detailAction'>Remove from favorites &#x2b;</p>\n            ) : (\n              <p onClick={() => addFavorite()} className='detailAction'>Add to favorites &#x2b;</p>\n            )}\n          </div>\n        </div>\n      </div>\n      {watchTrailer ? (\n        <ModalTrailer />\n      ) : null}\n    </>\n  );\n};\n\nexport default DetailMovie;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}